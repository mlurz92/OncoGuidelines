
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Logo – Diagnostische Patientenpfade – Icon ohne Schrift</title>
  <meta name="description" content="Ein simples, eingängiges SVG-Logo für den medizinisch-radiologischen Kontext: vernetzte Diagnosepunkte auf einem Pfad. Kreise in hellem Grau." />
  <meta property="og:title" content="Logo – Diagnostische Patientenpfade – Icon ohne Schrift">
  <meta property="og:description" content="Abstrakter diagnostischer Pfad mit vernetzten Knotenpunkten. Kreise in hellem Grau, dezente radiologische Symbolik.">
  <meta property="og:image" content="https://cdn.simulationtheory.ai/gasset/?asset=img&prompt=abstract%20diagnostic%20path%20logo%20in%20light%20gray%20and%20dark%20gray%2C%20medical%20radiology%20style%2C%20minimal%2C%20clean&w=800&h=420&style=professional">
  <meta property="og:type" content="website">

  <link rel="icon" type="image/png" sizes="32x32" href="https://cdn.simulationtheory.ai/gasset/?asset=img&prompt=abstract%20diagnostic%20path%20icon%20light%20gray%20minimal&w=64&h=64&style=professional">

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="/chat/cdn/animate.min.css" rel="stylesheet">
  <link href="/chat/cdn/all.min.css" rel="stylesheet">
  <script src="/chat/cdn/all.min.js" crossorigin></script>

  <style>
    @font-face {
      font-family: 'Font Awesome 6 Free';
      font-path: '/chat/webfonts/fa-regular-400';
      src: url('/chat/webfonts/fa-regular-400.woff2') format('woff2'),
           url('/chat/webfonts/fa-regular-400.ttf') format('truetype');
    }

    @font-face {
      font-family: 'Font Awesome 6 Free';
      font-path: '/chat/webfonts/fa-solid-900';
      src: url('/chat/webfonts/fa-solid-900.woff2') format('woff2'),
           url('/chat/webfonts/fa-solid-900.ttf') format('truetype');
    }

    @font-face {
      font-family: 'Font Awesome 6 Brands';
      font-path: '/chat/webfonts/fa-brands-400';
      src: url('/chat/webfonts/fa-brands-400.woff2') format('woff2'),
           url('/chat/webfonts/fa-brands-400.ttf') format('truetype');
    }
  </style>

  <script src="/chat/cdn/papaparse.min.js"></script>
</head>
<body class="min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 antialiased">
  <div class="max-w-4xl mx-auto p-6">
    <div class="flex items-center justify-between mb-6">
      <h1 class="text-2xl font-bold tracking-tight">Logo (ohne Schrift) – Kreise in hellem Grau</h1>
      <button id="toggleDark" class="inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-800 text-white dark:bg-gray-100 dark:text-gray-900 shadow-sm hover:shadow-md transition-all duration-300 ease-in-out">
        <i class="fas fa-moon fa-sm" aria-hidden="true"></i>
        <span class="text-sm font-medium">Dark Mode</span>
      </button>
    </div>

    <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-md p-6 space-y-6">
      <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold">Vorschau</h2>
        <span id="status" class="text-xs text-gray-500">Bereit</span>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-900">
          <div class="text-sm font-medium mb-3 flex items-center gap-2">
            <i class="fas fa-vector-square text-gray-500" aria-hidden="true"></i>
            Horizontales Icon
          </div>
          <div class="flex items-center justify-center">
            <svg id="logoIcon" viewBox="0 0 246 120" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="titleH descH" class="w-full max-w-md">
              <title id="titleH">Diagnostischer Pfad – Icon (horizontal)</title>
              <desc id="descH">Abstrakter Pfad mit vier vernetzten Knotenpunkten, radiologische Bögen, Kreise in hellem Grau.</desc>
              <g stroke-linecap="round" stroke-linejoin="round">
                <polyline points="30,85 95,60 165,92 225,55" fill="none" stroke="#444" stroke-width="6"/>
                <circle class="node" cx="30" cy="85" r="15" fill="#e5e7eb" stroke="#fff" stroke-width="3"/>
                <circle class="node" cx="95" cy="60" r="15" fill="#e5e7eb" stroke="#fff" stroke-width="3"/>
                <circle class="node" cx="165" cy="92" r="15" fill="#e5e7eb" stroke="#fff" stroke-width="3"/>
                <circle class="node" cx="225" cy="55" r="15" fill="#e5e7eb" stroke="#fff" stroke-width="3"/>
                <path d="M80,45 a20,20 0 0,1 30,0" fill="none" stroke="#444" stroke-width="3" opacity="0.8"/>
                <path d="M210,40 a20,20 0 0,1 30,0" fill="none" stroke="#444" stroke-width="2" opacity="0.5"/>
              </g>
            </svg>
          </div>
          <div class="mt-4 flex flex-wrap items-center gap-3">
            <button id="downloadHorizontal" class="px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition-all duration-300 ease-in-out shadow-sm hover:shadow-md">
              <i class="fas fa-download mr-2" aria-hidden="true"></i>SVG herunterladen
            </button>
          </div>
        </div>

        <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-900">
          <div class="text-sm font-medium mb-3 flex items-center gap-2">
            <i class="fas fa-square text-gray-500" aria-hidden="true"></i>
            Quadratisches Icon
          </div>
          <div class="flex items-center justify-center">
            <svg id="logoIconSquare" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="titleS descS" class="w-52 h-52">
              <title id="titleS">Diagnostischer Pfad – Icon (quadratisch)</title>
              <desc id="descS">Quadratische Variante: abstrakter Pfad, vier Knotenpunkte in hellem Grau, radiologische Bögen.</desc>
              <g stroke-linecap="round" stroke-linejoin="round">
                <polyline points="20,90 40,50 80,70 100,30" fill="none" stroke="#444" stroke-width="5"/>
                <circle class="node" cx="20" cy="90" r="12" fill="#e5e7eb" stroke="#fff" stroke-width="2.5"/>
                <circle class="node" cx="40" cy="50" r="12" fill="#e5e7eb" stroke="#fff" stroke-width="2.5"/>
                <circle class="node" cx="80" cy="70" r="12" fill="#e5e7eb" stroke="#fff" stroke-width="2.5"/>
                <circle class="node" cx="100" cy="30" r="12" fill="#e5e7eb" stroke="#fff" stroke-width="2.5"/>
                <path d="M30,40 a15,15 0 0,1 20,0" fill="none" stroke="#444" stroke-width="2.5" opacity="0.7"/>
                <path d="M88,20 a15,15 0 0,1 20,0" fill="none" stroke="#444" stroke-width="2" opacity="0.5"/>
              </g>
            </svg>
          </div>
          <div class="mt-4 flex flex-wrap items-center gap-3">
            <button id="downloadSquare" class="px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition-all duration-300 ease-in-out shadow-sm hover:shadow-md">
              <i class="fas fa-download mr-2" aria-hidden="true"></i>SVG herunterladen
            </button>
          </div>
        </div>
      </div>

      <div class="border-t border-gray-200 dark:border-gray-700 pt-6 space-y-4">
        <h3 class="text-base font-semibold">Anpassung (optional)</h3>
        <div class="flex flex-col md:flex-row items-start md:items-center gap-4">
          <label for="circleColor" class="text-sm">Kreisfarbe (HEX):</label>
          <div class="flex items-center gap-3">
            <input id="circleColor" type="color" value="#e5e7eb" class="h-10 w-16 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 cursor-pointer" aria-label="Kreisfarbe wählen">
            <input id="circleColorHex" type="text" value="#e5e7eb" class="px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm w-40" aria-label="Kreisfarbe Hexwert">
          </div>
          <div class="flex items-center gap-3">
            <button id="applyColor" class="px-3 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium transition-all duration-300 ease-in-out shadow-sm hover:shadow-md">
              <i class="fas fa-check mr-2" aria-hidden="true"></i>Anwenden
            </button>
            <button id="resetColor" class="px-3 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 text-gray-900 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600 text-sm font-medium transition-all duration-300 ease-in-out shadow-sm hover:shadow-md">
              <i class="fas fa-undo mr-2" aria-hidden="true"></i>Zurücksetzen
            </button>
          </div>
        </div>

        <div class="flex flex-wrap items-center gap-3">
          <button id="saveCsv" class="px-3 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium transition-all duration-300 ease-in-out shadow-sm hover:shadow-md">
            <i class="fas fa-file-csv mr-2" aria-hidden="true"></i>Einstellungen als CSV speichern
          </button>
          <button id="aiSuggest" class="px-3 py-2 rounded-lg bg-pink-600 hover:bg-pink-700 text-white text-sm font-medium transition-all duration-300 ease-in-out shadow-sm hover:shadow-md">
            <i class="fas fa-wand-magic-sparkles mr-2" aria-hidden="true"></i>AI-Vorschläge für helle Grautöne
          </button>
          <span id="aiStatus" class="text-xs text-gray-500"></span>
        </div>

        <div id="suggestions" class="flex flex-wrap gap-2"></div>
      </div>
    </div>

    <p class="mt-4 text-xs text-gray-500">
      Hinweis: Die Kreise sind standardmäßig in hellem Grau (#e5e7eb). Für sehr kleine Größen bleibt die Lesbarkeit durch klare Formen erhalten.
    </p>
  </div>

  <script>
    (function() {
      'use strict';

      const DEFAULT_COLOR = '#e5e7eb';
      const PATH_COLOR = '#444444';
      const STROKE_COLOR = '#ffffff';

      function $(sel, root = document) {
        return root.querySelector(sel);
      }

      function $all(sel, root = document) {
        return Array.from(root.querySelectorAll(sel));
      }

      function setStatus(msg) {
        const el = $('#status');
        if (el) el.textContent = msg;
      }

      function isValidHex(hex) {
        return /^#([0-9A-Fa-f]{6})$/.test(hex);
      }

      function applyCircleColor(hex) {
        try {
          const svgs = ['#logoIcon', '#logoIconSquare'].map(id => $(id)).filter(Boolean);
          svgs.forEach(svg => {
            $all('circle.node', svg).forEach(c => c.setAttribute('fill', hex));
          });
          setStatus('Farbe aktualisiert');
        } catch (e) {
          console.error('Fehler beim Setzen der Farbe:', e);
          setStatus('Fehler beim Aktualisieren der Farbe');
        }
      }

      function serializeSvg(svgEl) {
        const xmlHeader = '<?xml version="1.0" encoding="UTF-8"?>\n';
        const clone = svgEl.cloneNode(true);
        clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
        const svgText = new XMLSerializer().serializeToString(clone);
        return xmlHeader + svgText;
      }

      function downloadSvg(svgEl, filename) {
        try {
          const svgText = serializeSvg(svgEl);
          const blob = new Blob([svgText], { type: 'image/svg+xml;charset=utf-8' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = filename;
          document.body.appendChild(a);
          a.click();
          URL.revokeObjectURL(url);
          a.remove();
          setStatus('SVG exportiert');
        } catch (e) {
          console.error('Fehler beim Export:', e);
          setStatus('Export fehlgeschlagen');
          alert('Fehler beim Export der SVG-Datei.');
        }
      }

      function saveCsv() {
        try {
          const hex = $('#circleColorHex')?.value || DEFAULT_COLOR;
          const data = [{
            component: 'diagnostische_patientenpfade_icon',
            variant: 'horizontal+square',
            circle_fill: hex,
            path_color: PATH_COLOR,
            stroke_color: STROKE_COLOR,
            timestamp: new Date().toISOString()
          }];

          if (typeof window.save_data_to_csv === 'function') {
            window.save_data_to_csv('logo_einstellungen.csv', data);
            setStatus('CSV gespeichert');
          } else {
            setStatus('CSV-Funktion nicht verfügbar');
            console.warn('window.save_data_to_csv ist nicht verfügbar.');
          }
        } catch (e) {
          console.error('Fehler beim Speichern als CSV:', e);
          setStatus('CSV-Speichern fehlgeschlagen');
        }
      }

      async function aiSuggestColors() {
        const btn = $('#aiSuggest');
        const status = $('#aiStatus');
        if (!btn || !status) return;

        btn.disabled = true;
        btn.classList.add('opacity-60', 'cursor-not-allowed');
        status.textContent = 'AI schlägt Farben vor...';
        setStatus('AI-Vorschläge werden abgerufen');

        const fallbackColors = ['#ececec', '#e5e7eb', '#dedede', '#d9d9d9', '#d1d5db'];

        try {
          if (typeof window.call_llm !== 'function') {
            throw new Error('call_llm nicht verfügbar');
          }

          const system_prompt = 'Du bist ein präziser Farbabgleich-Assistent. Liefere ausschließlich JSON mit dem Feld "colors", ' +
            'das ein Array von exakt 5 unterschiedlichen HEX-Farben im Format #RRGGBB enthält. Fokus: helle, neutrale Grautöne ' +
            'geeignet für UI-Knotenpunkte im medizinisch-radiologischen Kontext. Keine Erklärungen.';

          const user_messages = [
            { role: 'user', content: 'Schlage 5 helle neutrale Grautöne vor. Nur JSON mit Feld "colors".' }
          ];

          const json_fields = [{ colors: 'array of 5 hex color strings (#RRGGBB)' }];

          const res = await window.call_llm(system_prompt, user_messages, json_fields);
          const colors = Array.isArray(res?.colors) && res.colors.length === 5
            ? res.colors.filter(c => typeof c === 'string' && /^#[0-9A-Fa-f]{6}$/.test(c))
            : fallbackColors;

          renderSuggestions(colors);
          status.textContent = 'Vorschläge bereit';
          setStatus('AI-Vorschläge bereit');
        } catch (err) {
          console.warn('AI-Vorschläge nicht verfügbar, nutze Fallback:', err);
          renderSuggestions(fallbackColors);
          status.textContent = 'Fallback-Vorschläge bereit';
          setStatus('AI nicht verfügbar – Fallback genutzt');
        } finally {
          btn.disabled = false;
          btn.classList.remove('opacity-60', 'cursor-not-allowed');
        }
      }

      function renderSuggestions(colors) {
        const container = $('#suggestions');
        if (!container) return;
        container.innerHTML = '';

        colors.forEach((c, idx) => {
          const chip = document.createElement('button');
          chip.type = 'button';
          chip.className = 'px-3 py-2 rounded-lg border text-xs font-medium shadow-sm transition-all duration-300 ease-in-out ' +
                           'hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 ' +
                           'border-gray-200 dark:border-gray-700';
          chip.style.background = c;
          chip.style.color = '#111827';
          chip.textContent = c.toUpperCase();
          chip.setAttribute('aria-label', `Farbe ${c}`);
          chip.addEventListener('click', () => {
            $('#circleColor').value = c;
            $('#circleColorHex').value = c;
            applyCircleColor(c);
          });
          container.appendChild(chip);
        });
      }

      function syncHexInputs(from = 'picker') {
        const picker = $('#circleColor');
        const hex = $('#circleColorHex');
        if (!picker || !hex) return;

        if (from === 'picker') {
          hex.value = picker.value.toLowerCase();
        } else {
          const val = hex.value.trim();
          if (isValidHex(val)) {
            picker.value = val.toLowerCase();
          }
        }
      }

      function toggleDarkMode() {
        document.documentElement.classList.toggle('dark');
      }

      document.addEventListener('DOMContentLoaded', () => {
        setStatus('Bereit');

        $('#toggleDark')?.addEventListener('click', toggleDarkMode);

        $('#circleColor')?.addEventListener('input', () => syncHexInputs('picker'));
        $('#circleColorHex')?.addEventListener('input', () => syncHexInputs('hex'));

        $('#applyColor')?.addEventListener('click', () => {
          const hex = $('#circleColorHex')?.value.trim();
          if (!isValidHex(hex)) {
            alert('Bitte geben Sie einen gültigen HEX-Farbwert ein (z. B. #e5e7eb).');
            return;
          }
          applyCircleColor(hex);
        });

        $('#resetColor')?.addEventListener('click', () => {
          $('#circleColor').value = DEFAULT_COLOR;
          $('#circleColorHex').value = DEFAULT_COLOR;
          applyCircleColor(DEFAULT_COLOR);
        });

        $('#downloadHorizontal')?.addEventListener('click', () => {
          const svg = $('#logoIcon');
          if (svg) downloadSvg(svg, 'logo_icon_horizontal.svg');
        });

        $('#downloadSquare')?.addEventListener('click', () => {
          const svg = $('#logoIconSquare');
          if (svg) downloadSvg(svg, 'logo_icon_square.svg');
        });

        $('#saveCsv')?.addEventListener('click', saveCsv);
        $('#aiSuggest')?.addEventListener('click', aiSuggestColors);

        applyCircleColor(DEFAULT_COLOR);
      });
    })();
  </script>
</body>
</html>
        
